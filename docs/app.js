(function(){"use strict";var e={172:function(e,t,n){var s=n(963),i=n(252);function a(e,t,n,s,a,r){const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(o)}var r={name:"App"},o=n(744);const c=(0,o.Z)(r,[["render",a]]);var h=c,u=n(119);const l={class:"demo",id:"demo"};function d(e,t,n,s,a,r){return(0,i.wg)(),(0,i.iD)("canvas",l)}var m=n(385),p=n(125);class v{constructor(){this.all={}}addCamera(e){this.all[e.name]=this.setupCamera(e),this.addCameraWASD(e.name)}setupCamera(e){const t=new m.UniversalCamera(e.name,new m.Vector3(0,3,-20),e.scene);return t.setTarget(m.Vector3.Zero()),t.applyGravity=!0,t._needMoveForGravity=!0,t.ellipsoid=new m.Vector3(1,1.5,1),t.checkCollisions=!0,t.attachControl(e.canvas,!0),t}addCameraWASD(e){this.all[e].keysUp.push(87),this.all[e].keysDown.push(83),this.all[e].keysRight.push(68),this.all[e].keysLeft.push(65)}getGroundDistance(e,t){const n=this.all[e].position,s=m.Vector3.Down(),i=300,a=new m.Ray(n,s,i),r=t.pickWithRay(a);return r.distance}}const g=new v;var w=g;class f{constructor(e){this.name=e.name,this.width=e.width||100,this.height=e.height||100,this.subdivision=e.subdivision||0,this.scene=e.scene,this.updatable=e.updatable||!1,this.ground=void 0,this.setup()}setup(){this.ground=m.Mesh.CreateGround(this.name,this.width,this.height,this.subdivision,this.scene,this.updatable),this.ground.checkCollisions=!0}setTexture(e){this.ground.material=e.texture}}class k{constructor(){this.all={}}addGround(e){const t=new f(e);return this.all[e.name]=t,t}}const y=new k;var A=y;class b{constructor(e){this.name=e.name,this.scene=e.scene,this.light=void 0,this.setup()}setup(){this.light=new m.HemisphericLight(this.name,new m.Vector3(0,1,0),this.scene)}}class E{constructor(){this.all={}}addLight(e){const t=new b(e);return this.all[e.name]=t,t}}const O=new E;var C=O;class L{constructor(e){this.name=e.name,this.scene=e.scene,this.asset=e.asset||"",this.texture=void 0,this.setup(),this.asset&&this.setAsset()}setup(){this.texture=new m.StandardMaterial(this.name,this.scene)}setAsset(){this.texture.diffuseTexture=new m.Texture(this.asset,this.scene)}}class T{constructor(){this.all={}}addTexture(e){const t=new L(e);return this.all[e.name]=t,t}}const x=new T;var M=x,D={name:"demo",data(){return{camera:void 0,canvas:void 0,engine:void 0,jLock:!1,jump:2,kDown:{},scene:void 0}},mounted(){this.canvas=document.getElementById("demo");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new m.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.createScene(),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{createScene(){this.scene=new m.Scene(this.engine),this.scene.gravity=new m.Vector3(0,-.75,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new m.CannonJSPlugin(!0,10,p)),w.addCamera({name:"camera",scene:this.scene,canvas:this.canvas}),this.scene.actionManager=new m.ActionManager(this.scene),this.scene.actionManager.registerAction(new m.ExecuteCodeAction(m.ActionManager.OnKeyDownTrigger,(e=>{this.kDown[e.sourceEvent.key]="keydown"==e.sourceEvent.type}))),this.scene.actionManager.registerAction(new m.ExecuteCodeAction(m.ActionManager.OnKeyUpTrigger,(e=>{this.kDown[e.sourceEvent.key]="keydown"==e.sourceEvent.type}))),this.scene.onPointerDown=e=>{this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.msRequestPointerLock||this.canvas.mozRequestPointerLock||this.canvas.webkitRequestPointerLock,this.canvas.requestPointerLock&&this.canvas.requestPointerLock()},C.addLight({name:"light1",scene:this.scene});let e=m.Mesh.CreateSphere("sphere1",16,8,this.scene,!1,m.Mesh.FRONTSIDE),t=new m.StandardMaterial("sphereTexture",this.scene);t.diffuseTexture=new m.Texture("assets/nori.png",this.scene),e.material=t,e.position.y=4;const n=m.MeshBuilder.CreateBox("box",{size:8},this.scene);n.position.y=4;const s=new m.Animation("rotateSphere","rotation.y",10,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),i=[];i.push({frame:0,value:0}),i.push({frame:40,value:2*Math.PI}),s.setKeys(i),e.animations.push(s),this.scene.beginAnimation(e,0,40,!0),n.checkCollisions=!0,n.visibility=0,A.addGround({name:"ground1",width:250,height:250,scene:this.scene}),M.addTexture({name:"ground1",scene:this.scene,asset:"assets/grass.jpg"}),A.all.ground1.setTexture(M.all.ground1),this.scene.registerAfterRender(this.registerAfterRenderCallback)},registerAfterRenderCallback(){if(w.getGroundDistance("camera",this.scene)<4&&!this.jLock&&(this.jump=2),this.kDown[" "]&&!this.jLock&&this.jump>0){this.jump--,this.jLock=!0,w.all.camera.animations=[];let e=new m.Animation("a","position.y",60,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),t=[];t.push({frame:0,value:w.all.camera.position.y}),t.push({frame:20,value:w.all.camera.position.y+16}),e.setKeys(t);let n=new m.CircleEase;n.setEasingMode(m.EasingFunction.EASINGMODE_EASEOUT),e.setEasingFunction(n),w.all.camera.animations.push(e),this.scene.beginAnimation(w.all.camera,0,20,!1)}!this.kDown[" "]&&this.jLock&&(this.jLock=!1)}}};const j=(0,o.Z)(D,[["render",d],["__scopeId","data-v-7950f48b"]]);var P=j;const R=[{path:"/",name:"Title",component:P}],I=(0,u.p7)({history:(0,u.r5)(),routes:R});var S=I;(0,s.ri)(h).use(S).mount("#app")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,i,a){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],i=e[u][1],a=e[u][2];for(var o=!0,c=0;c<s.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(u--,1);var h=i();void 0!==h&&(t=h)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,i,a]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,a,r=s[0],o=s[1],c=s[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var u=c(n)}for(t&&t(s);h<r.length;h++)a=r[h],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},s=window["webpackChunknochi3d"]=window["webpackChunknochi3d"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(172)}));s=n.O(s)})();
//# sourceMappingURL=app.js.map?id=0933ac6029e03269