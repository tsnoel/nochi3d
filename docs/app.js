(function(){"use strict";var e={903:function(e,t,s){var n=s(963),i=s(252);function a(e,t,s,n,a,r){const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(o,{keys:a.keys},null,8,["keys"])}var r={name:"App",data(){return{keys:{}}},beforeMount(){this.addKeyListeners()},methods:{addKeyListeners(){document.addEventListener("keydown",(e=>{87==e.keyCode&&(this.keys.w=!0),65==e.keyCode&&(this.keys.a=!0),83==e.keyCode&&(this.keys.s=!0),68==e.keyCode&&(this.keys.d=!0),32==e.keyCode&&(this.keys.space=!0),16==e.keyCode&&(this.keys.shift=!0)})),document.addEventListener("keyup",(e=>{87==e.keyCode&&(this.keys.w=!1),65==e.keyCode&&(this.keys.a=!1),83==e.keyCode&&(this.keys.s=!1),68==e.keyCode&&(this.keys.d=!1),32==e.keyCode&&(this.keys.space=!1),16==e.keyCode&&(this.keys.shift=!1)}))},addTouchListeners(){document.addEventListener("touchstart",(e=>{this.keys.space=!0})),document.addEventListener("touchend",(e=>{this.keys.space=!1})),document.addEventListener("touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0],s=document.createEvent("MouseEvent");s.initMouseEvent("mousemove",!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(s)}))}}},o=s(744);const c=(0,o.Z)(r,[["render",a]]);var h=c,u=s(119);const d={class:"demo",id:"demo"};function l(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("canvas",d)}var m=s(385),p=s(125);s(1);class y{constructor(){this.all={},this.jump=new m.Animation("jump","position.y",60,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE);const e=new m.CircleEase;e.setEasingMode(m.EasingFunction.EASINGMODE_EASEOUT),this.jump.setEasingFunction(e)}addCamera(e){this.all[e.name]=this.setupCamera(e),this.addCameraWASD(e.name)}setupCamera(e){const t=new m.UniversalCamera(e.name,new m.Vector3(30,3,-70),e.scene);return t.setTarget(new m.Vector3(10,10,0)),t.applyGravity=!0,t._needMoveForGravity=!0,t.ellipsoid=new m.Vector3(1,1.5,1),t.checkCollisions=!0,t.attachControl(e.canvas,!0),t}addCameraWASD(e){this.all[e].keysUp.push(87),this.all[e].keysDown.push(83),this.all[e].keysRight.push(68),this.all[e].keysLeft.push(65)}getGroundDistance(e,t){const s=this.all[e].position,n=m.Vector3.Down(),i=300,a=new m.Ray(s,n,i),r=t.pickWithRay(a);return r.distance}}const v=new y;var g=v;class k{constructor(){this.ground={},this.imported={},this.sphere={},this.rotateSphere=new m.Animation("rotateSphere","rotation.y",10,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),this.rotateSphere.setKeys([{frame:0,value:0},{frame:100,value:2*Math.PI}]),this.reverseRotateSphere=new m.Animation("rotateSphere","rotation.y",10,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),this.reverseRotateSphere.setKeys([{frame:0,value:0},{frame:100,value:-2*Math.PI}])}addMesh(e,t){return this[e][t.name]={},"ground"===e?this[e][t.name]=this.setupGround(t):"sphere"===e&&(this[e][t.name]=this.setupSphere(t)),this[e][t.name]}setTexture(e,t,s){this[e][t].material=s}setupGround(e){let t=m.Mesh.CreateGround(e.name,e.width||100,e.height||100,e.subdivision||0,e.scene,e.updatable||!1);return e.texture&&(t.material=e.texture),t.checkCollisions=!0,t}setupSphere(e){const t=m.MeshBuilder.CreateBox(e.name,{size:e.diameter||1},e.scene);t.position.x=e.x||0,t.position.y=e.y||e.diameter/2||0,t.position.z=e.z||0,t.checkCollisions=!0,t.visibility=0;const s=m.Mesh.CreateSphere(`${e.name}_inner`,e.segment||16,e.diameter||1,e.scene,e.updatable||!1,e.sideOrientation||m.Mesh.FRONTSIDE);return e.texture&&(s.material=e.texture),e.rotate?(s.animations.push(this.rotateSphere),e.scene.beginAnimation(s,0,100,!0)):e.reverseRotate&&(s.animations.push(this.reverseRotateSphere),e.scene.beginAnimation(s,0,100,!0)),s.parent=t,t}}const f=new k;var w=f;class L{constructor(){this.all={}}addLight(e){return this.all[e.name]=this.setupLight(e),this.all[e.name]}setupLight(e){return new m.HemisphericLight(e.name,new m.Vector3(0,1,0),e.scene)}}const x=new L;var C=x;class A{constructor(){this.all={}}addTexture(e){return this.all[e.name]=this.setupTexture(e),this.all[e.name]}setAsset(e,t){e.diffuseTexture=new m.Texture(t.asset,t.scene)}setupTexture(e){let t=new m.StandardMaterial(this.name,this.scene);return e.asset&&this.setAsset(t,e),t}}const E=new A;var T=E,O={name:"demo",data(){return{canvas:void 0,crouch:!1,engine:void 0,jLock:!1,jump:2,kDown:{},scene:void 0}},props:{keys:Object},mounted(){this.canvas=document.getElementById("demo");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new m.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.createScene(),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{addPointerLock(){this.scene.onPointerDown=()=>{this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.msRequestPointerLock||this.canvas.mozRequestPointerLock||this.canvas.webkitRequestPointerLock,this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}},addTextures(){T.addTexture({name:"ground1",scene:this.scene,asset:"assets/mochi_full.jpg"}),T.addTexture({name:"gregg",scene:this.scene,asset:"assets/gregg_face.png"}),T.addTexture({name:"leo",scene:this.scene,asset:"assets/leo_face.png"}),T.addTexture({name:"mochi",scene:this.scene,asset:"assets/mochi_face.jpg"}),T.addTexture({name:"mochi2",scene:this.scene,asset:"assets/mochi_face_2.png"}),T.addTexture({name:"nori",scene:this.scene,asset:"assets/nori_face.png"}),T.addTexture({name:"nori2",scene:this.scene,asset:"assets/nori_full.png"})},createScene(){this.scene=new m.Scene(this.engine),this.scene.gravity=new m.Vector3(0,-1.3,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new m.CannonJSPlugin(!0,10,p)),this.addPointerLock(),this.addTextures(),g.addCamera({name:"camera",scene:this.scene,canvas:this.canvas}),C.addLight({name:"light1",scene:this.scene}),m.SceneLoader.ImportMesh(null,"assets/","penguin.obj",this.scene,(e=>{console.log(e),w.imported.penguin=m.MeshBuilder.CreateBox("penguin",{size:6},this.scene),w.imported.penguin.visibility=0,e.forEach((e=>{e.parent=w.imported.penguin})),w.imported.penguin.position.y=20,w.imported.penguin.rotation.z=Math.PI/4,w.imported.penguin.checkCollisions=!0,w.imported.penguin.animations.push(w.reverseRotateSphere),this.scene.beginAnimation(w.imported.penguin,0,100,!0)})),w.addMesh("sphere",{name:"noriS",diameter:10,scene:this.scene,texture:T.all.nori,rotate:!0,y:6}),w.addMesh("sphere",{name:"greggS",diameter:8,scene:this.scene,texture:T.all.gregg,rotate:!0,x:20,y:10,z:-28}),w.addMesh("sphere",{name:"mochiS",diameter:12,scene:this.scene,texture:T.all.mochi,reverseRotate:!0,x:-15}),w.addMesh("sphere",{name:"mochi2S",diameter:6,scene:this.scene,texture:T.all.mochi2,rotate:!0,x:-15,y:12}),w.addMesh("sphere",{name:"leoS",diameter:8,scene:this.scene,texture:T.all.leo,reverseRotate:!0,x:28,y:8,z:-18}),w.addMesh("sphere",{name:"nori2SL",diameter:50,scene:this.scene,texture:T.all.nori2,x:100,y:25,z:-100}),w.addMesh("ground",{name:"ground1",width:150,height:150,scene:this.scene,texture:T.all.ground1}),this.scene.registerAfterRender(this.keyboardListener)},keyboardListener(){this.scene.isReady()&&(this.keys.shift&&!this.crouch?(g.all.camera.ellipsoid.y=.75,this.crouch=!0):!this.keys.shift&&this.crouch&&(g.all.camera.position.y+=1.5,g.all.camera.ellipsoid.y=1.5,this.crouch=!1),this.jump<2&&!this.jLock&&g.getGroundDistance("camera",this.scene)<4&&(this.jump=2),this.keys.space&&!this.jLock&&this.jump>0&&(this.jump--,this.jLock=!0,g.jump.setKeys([{frame:0,value:g.all.camera.position.y},{frame:20,value:g.all.camera.position.y+16}]),g.all.camera.animations=[g.jump],this.scene.beginAnimation(g.all.camera,0,20,!1)),this.jLock&&!this.keys.space&&(this.jLock=!1))}}};const M=(0,o.Z)(O,[["render",l],["__scopeId","data-v-71013613"]]);var b=M;const S=[{path:"/",name:"Title",component:b}],j=(0,u.p7)({history:(0,u.r5)(),routes:S});var P=j;(0,n.ri)(h).use(P).mount("#app")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,n,i,a){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],a=e[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(u--,1);var h=i();void 0!==h&&(t=h)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,a,r=n[0],o=n[1],c=n[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var u=c(s)}for(t&&t(n);h<r.length;h++)a=r[h],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=window["webpackChunknochi3d"]=window["webpackChunknochi3d"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(903)}));n=s.O(n)})();
//# sourceMappingURL=app.js.map?id=8d2f4687c54205d0