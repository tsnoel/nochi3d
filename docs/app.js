(function(){"use strict";var e={913:function(e,t,s){var n=s(963),i=s(252);function a(e,t,s,n,a,r){const o=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(o,{keys:a.keys},null,8,["keys"])}var r={name:"App",data(){return{keys:{}}},beforeMount(){this.addKeyListeners()},methods:{addKeyListeners(){document.addEventListener("keydown",(e=>{32==e.keyCode&&(this.keys.space=!0),16==e.keyCode&&(this.keys.shift=!0)})),document.addEventListener("keyup",(e=>{32==e.keyCode&&(this.keys.space=!1),16==e.keyCode&&(this.keys.shift=!1)}))},addTouchListeners(){document.addEventListener("touchstart",(e=>{this.keys.space=!0})),document.addEventListener("touchend",(e=>{this.keys.space=!1}))}}},o=s(744);const c=(0,o.Z)(r,[["render",a]]);var h=c,u=s(119);const d={class:"demo",id:"demo"};function m(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("canvas",d)}var l=s(385),p=s(125);s(1);class g{constructor(){this.all={},this.jump=new l.Animation("jump","position.y",60,l.Animation.ANIMATIONTYPE_FLOAT,l.Animation.ANIMATIONLOOPMODE_CYCLE);const e=new l.CircleEase;e.setEasingMode(l.EasingFunction.EASINGMODE_EASEOUT),this.jump.setEasingFunction(e)}addCamera(e){this.all[e.name]=this.setupCamera(e),this.addCameraWASD(e.name)}addCameraWASD(e){this.all[e].keysUp.push(87),this.all[e].keysDown.push(83),this.all[e].keysRight.push(68),this.all[e].keysLeft.push(65)}addPointerLock(e,t){e.onPointerDown=()=>{t.requestPointerLock=t.requestPointerLock||t.msRequestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()}}getGroundDistance(e,t){const s=this.all[e].position,n=l.Vector3.Down(),i=300,a=new l.Ray(s,n,i),r=t.pickWithRay(a);return r.distance}setupCamera(e){const t=new l.UniversalCamera(e.name,e.position||new l.Vector3(0,3,0),e.scene);return t.setTarget(new l.Vector3(0,10,0)),t.applyGravity=!0,t._needMoveForGravity=!0,t.ellipsoid=new l.Vector3(1,1.5,1),t.checkCollisions=!0,t.attachControl(e.canvas,!0),t}}const v=new g;var y=v;class f{constructor(){this.ground={},this.imported={},this.sphere={},this.rotateSphere=new l.Animation("rotateSphere","rotation.y",10,l.Animation.ANIMATIONTYPE_FLOAT,l.Animation.ANIMATIONLOOPMODE_CYCLE),this.rotateSphere.setKeys([{frame:0,value:0},{frame:100,value:2*Math.PI}]),this.reverseRotateSphere=new l.Animation("rotateSphere","rotation.y",10,l.Animation.ANIMATIONTYPE_FLOAT,l.Animation.ANIMATIONLOOPMODE_CYCLE),this.reverseRotateSphere.setKeys([{frame:0,value:0},{frame:100,value:-2*Math.PI}])}addMesh(e,t){"ground"===e?this[e][t.name]=this.setupGround(t):"sphere"===e?this[e][t.name]=this.setupSphere(t):"imported"===e?this[e][t.name]=this.setupImported(t):"tiledground"===e?this.ground[t.name]=this.setupTiledGround(t):this[e][t.name]={}}setTexture(e,t,s){this[e][t].material=s}setupGround(e){let t=l.Mesh.CreateGround(e.name,e.width||100,e.height||100,e.subdivision||0,e.scene,e.updatable||!1);return e.texture&&(t.material=e.texture),t.checkCollisions=!0,t}setupImported(e){l.SceneLoader.ImportMesh(null,e.path,e.file,e.scene,(t=>{this.imported[e.name]=l.MeshBuilder.CreateBox(e.name,{size:e.size||1},this.scene),this.imported[e.name].visibility=0,t.forEach((t=>{t.checkCollisions=!0,t.parent=this.imported[e.name]})),e.position&&(this.imported[e.name].position=e.position),e.rotation&&(this.imported[e.name].rotation=e.rotation),e.scaling&&(this.imported[e.name].scaling=e.scaling)}))}setupSphere(e){const t=l.MeshBuilder.CreateBox(e.name,{size:e.diameter||1},e.scene);t.position.x=e.x||0,t.position.y=e.y||e.diameter/2||0,t.position.z=e.z||0,t.checkCollisions=!0,t.visibility=0;const s=l.Mesh.CreateSphere(`${e.name}_inner`,e.segment||16,e.diameter||1,e.scene,e.updatable||!1,e.sideOrientation||l.Mesh.FRONTSIDE);return e.texture&&(s.material=e.texture),e.rotate?(s.animations.push(this.rotateSphere),e.scene.beginAnimation(s,0,100,!0)):e.reverseRotate&&(s.animations.push(this.reverseRotateSphere),e.scene.beginAnimation(s,0,100,!0)),s.parent=t,t}setupTiledGround(e){const t={h:8,w:8},s=new l.MeshBuilder.CreateTiledGround(e.name,{xmin:-3,zmin:-3,xmax:3,zmax:3,subdivisions:t}),n=new l.MultiMaterial("multi",e.scene);n.subMaterials.push(e.texture),s.material=n;const i=s.getTotalVertices(),a=s.getIndices().length/(t.w*t.h);s.subMeshes=[];let r=0;for(let o=0;o<t.h;o++)for(let e=0;e<t.w;e++)s.subMeshes.push(new l.SubMesh(o%2^e%2,0,i,r,a,s)),r+=a;return s.checkCollisions=!0,s}}const w=new f;var k=w;class L{constructor(){this.all={}}addLight(e){return this.all[e.name]=this.setupLight(e),this.all[e.name]}setupLight(e){return new l.HemisphericLight(e.name,new l.Vector3(0,1,0),e.scene)}}const x=new L;var M=x;class b{constructor(){this.all={}}addTexture(e){return this.all[e.name]=this.setupTexture(e),this.all[e.name]}setAsset(e,t){e.diffuseTexture=new l.Texture(t.asset,t.scene)}setupTexture(e){let t=new l.StandardMaterial(this.name,this.scene);return e.asset&&this.setAsset(t,e),t}}const j=new b;var T=j,E={name:"demo",data(){return{canvas:void 0,crouch:!1,engine:void 0,jLock:!1,jump:2,kDown:{},scene:void 0}},props:{keys:Object},mounted(){this.canvas=document.getElementById("demo");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new l.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.createScene(),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{createScene(){this.scene=new l.Scene(this.engine),this.scene.gravity=new l.Vector3(0,-1.3,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new l.CannonJSPlugin(!0,10,p)),y.addPointerLock(this.scene,this.canvas),this.setTextures(),y.addCamera({name:"camera",position:new l.Vector3(0,3,-40),scene:this.scene,canvas:this.canvas}),M.addLight({name:"light1",scene:this.scene}),l.SceneLoader.ImportMesh(null,"assets/","penguin.glb",this.scene,(e=>{k.imported.penguin=l.MeshBuilder.CreateBox("penguin",{size:6},this.scene),k.imported.penguin.visibility=0,e.forEach((e=>{e.parent=k.imported.penguin})),k.imported.penguin.position.y=11,k.imported.penguin.rotation.x=Math.PI/2,k.imported.penguin.rotation.y=Math.PI,k.imported.penguin.checkCollisions=!0,k.imported.penguin.animations.push(k.reverseRotateSphere),this.scene.beginAnimation(k.imported.penguin,0,100,!0)})),k.addMesh("sphere",{name:"noriS",diameter:10,scene:this.scene,texture:T.all.nori,rotate:!0,y:6}),k.addMesh("sphere",{name:"greggS",diameter:8,scene:this.scene,texture:T.all.gregg,rotate:!0,x:20,y:10,z:-28}),k.addMesh("sphere",{name:"mochiS",diameter:12,scene:this.scene,texture:T.all.mochi,reverseRotate:!0,x:-15}),k.addMesh("sphere",{name:"mochi2S",diameter:6,scene:this.scene,texture:T.all.mochi2,rotate:!0,x:-15,y:12}),k.addMesh("sphere",{name:"leoS",diameter:8,scene:this.scene,texture:T.all.leo,reverseRotate:!0,x:28,y:8,z:-18}),k.addMesh("sphere",{name:"nori2SL",diameter:50,scene:this.scene,texture:T.all.nori2,x:100,y:25,z:-100}),k.addMesh("ground",{name:"ground1",width:150,height:150,scene:this.scene,texture:T.all.ground1}),this.scene.registerAfterRender(this.keyboardListener)},keyboardListener(){this.scene.isReady()&&(this.keys.shift&&!this.crouch?(y.all.camera.ellipsoid.y=.75,this.crouch=!0):!this.keys.shift&&this.crouch&&(y.all.camera.position.y+=1.5,y.all.camera.ellipsoid.y=1.5,this.crouch=!1),this.jump<2&&!this.jLock&&y.getGroundDistance("camera",this.scene)<4&&(this.jump=2),this.keys.space&&!this.jLock&&this.jump>0&&(this.jump--,this.jLock=!0,y.jump.setKeys([{frame:0,value:y.all.camera.position.y},{frame:20,value:y.all.camera.position.y+16}]),y.all.camera.animations=[y.jump],this.scene.beginAnimation(y.all.camera,0,20,!1)),this.jLock&&!this.keys.space&&(this.jLock=!1))},setTextures(){T.addTexture({name:"ground1",scene:this.scene,asset:"assets/mochi_full.jpg"}),T.addTexture({name:"gregg",scene:this.scene,asset:"assets/gregg_face.png"}),T.addTexture({name:"leo",scene:this.scene,asset:"assets/leo_face.png"}),T.addTexture({name:"mochi",scene:this.scene,asset:"assets/mochi_face.jpg"}),T.addTexture({name:"mochi2",scene:this.scene,asset:"assets/mochi_face_2.png"}),T.addTexture({name:"nori",scene:this.scene,asset:"assets/nori_face.png"}),T.addTexture({name:"nori2",scene:this.scene,asset:"assets/nori_full.png"})}}};const A=(0,o.Z)(E,[["render",m],["__scopeId","data-v-7f77818e"]]);var C=A;const O={class:"room",id:"room"};function P(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("canvas",O)}var S={name:"room",data(){return{canvas:void 0,crouch:!1,engine:void 0,jLock:!1,jump:2,kDown:{},scene:void 0}},props:{keys:Object},mounted(){this.canvas=document.getElementById("room");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new l.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.createScene(),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{addTextures(){T.addTexture({name:"snow",scene:this.scene,asset:"assets/snow.png"})},createScene(){this.scene=new l.Scene(this.engine),this.scene.gravity=new l.Vector3(0,-1.3,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new l.CannonJSPlugin(!0,10,p)),y.addPointerLock(this.scene,this.canvas),this.addTextures(),y.addCamera({name:"camera",position:new l.Vector3(0,3,-40),scene:this.scene,canvas:this.canvas}),M.addLight({name:"light1",scene:this.scene}),k.addMesh("imported",{name:"penguin1",path:"assets/",file:"penguin.glb",scene:this.scene,position:new l.Vector3(0,0,0),rotation:new l.Vector3(Math.PI/2,Math.PI,0),scaling:new l.Vector3(2,2,2)}),k.addMesh("imported",{name:"penguin2",path:"assets/",file:"penguin.glb",scene:this.scene,position:new l.Vector3(6,0,-6),rotation:new l.Vector3(Math.PI/2,Math.PI,0)}),k.addMesh("imported",{name:"penguin3",path:"assets/",file:"penguin.glb",scene:this.scene,position:new l.Vector3(-6,0,-6),rotation:new l.Vector3(Math.PI/2,Math.PI,0)}),k.addMesh("ground",{name:"ground2",width:250,height:250,scene:this.scene,texture:T.all.snow}),this.scene.registerAfterRender(this.keyboardListener)},keyboardListener(){this.scene.isReady()&&(this.keys.shift&&!this.crouch?(y.all.camera.ellipsoid.y=.75,this.crouch=!0):!this.keys.shift&&this.crouch&&(y.all.camera.position.y+=1.5,y.all.camera.ellipsoid.y=1.5,this.crouch=!1),this.jump<2&&!this.jLock&&y.getGroundDistance("camera",this.scene)<4&&(this.jump=2),this.keys.space&&!this.jLock&&this.jump>0&&(this.jump--,this.jLock=!0,y.jump.setKeys([{frame:0,value:y.all.camera.position.y},{frame:20,value:y.all.camera.position.y+16}]),y.all.camera.animations=[y.jump],this.scene.beginAnimation(y.all.camera,0,20,!1)),this.jLock&&!this.keys.space&&(this.jLock=!1))}}};const I=(0,o.Z)(S,[["render",P],["__scopeId","data-v-adedbd68"]]);var R=I;const D=[{path:"/",name:"Demo",component:C},{path:"/penguins",name:"Room",component:R}],_=(0,u.p7)({history:(0,u.r5)(),routes:D});var V=_;(0,n.ri)(h).use(V).mount("#app")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,n,i,a){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],a=e[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(u--,1);var h=i();void 0!==h&&(t=h)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,a,r=n[0],o=n[1],c=n[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var u=c(s)}for(t&&t(n);h<r.length;h++)a=r[h],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},n=window["webpackChunknochi3d"]=window["webpackChunknochi3d"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(913)}));n=s.O(n)})();
//# sourceMappingURL=app.js.map?id=bc0f9d4424ac3025