(function(){"use strict";var e={503:function(e,t,n){var s=n(963),i=n(252);const a={class:"game",id:"game"};function r(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)("canvas",a)}var o=n(385),c=n(125);n(1);class h{constructor(){this.all={},this.jump=new o.Animation("jump","position.y",60,o.Animation.ANIMATIONTYPE_FLOAT,o.Animation.ANIMATIONLOOPMODE_CYCLE);const e=new o.CircleEase;e.setEasingMode(o.EasingFunction.EASINGMODE_EASEOUT),this.jump.setEasingFunction(e)}addCamera(e){this.all[e.name]=this.setupCamera(e),this.addCameraWASD(e.name)}addCameraWASD(e){this.all[e].keysUp.push(87),this.all[e].keysDown.push(83),this.all[e].keysRight.push(68),this.all[e].keysLeft.push(65)}addPointerLock(e,t){e.onPointerDown=()=>{t.requestPointerLock=t.requestPointerLock||t.msRequestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()}}getGroundDistance(e,t){const n=this.all[e].position,s=o.Vector3.Down(),i=300,a=new o.Ray(n,s,i),r=t.pickWithRay(a);return r.distance}setupCamera(e){const t=new o.UniversalCamera(e.name,e.position||new o.Vector3(0,3,0),e.scene);return t.setTarget(new o.Vector3(0,10,0)),t.applyGravity=!0,t._needMoveForGravity=!0,t.ellipsoid=new o.Vector3(1,1.5,1),t.checkCollisions=!0,t.attachControl(e.canvas,!0),t}}const u=new h;var l=u;class d{constructor(){this.ground={},this.imported={},this.sphere={},this.rotateSphere=new o.Animation("rotateSphere","rotation.y",10,o.Animation.ANIMATIONTYPE_FLOAT,o.Animation.ANIMATIONLOOPMODE_CYCLE),this.rotateSphere.setKeys([{frame:0,value:0},{frame:100,value:2*Math.PI}]),this.reverseRotateSphere=new o.Animation("rotateSphere","rotation.y",10,o.Animation.ANIMATIONTYPE_FLOAT,o.Animation.ANIMATIONLOOPMODE_CYCLE),this.reverseRotateSphere.setKeys([{frame:0,value:0},{frame:100,value:-2*Math.PI}])}addMesh(e,t){"ground"===e?this[e][t.name]=this.setupGround(t):"sphere"===e?this[e][t.name]=this.setupSphere(t):"imported"===e?this[e][t.name]=this.setupImported(t):"tiledground"===e?this.ground[t.name]=this.setupTiledGround(t):this[e][t.name]={}}setTexture(e,t,n){this[e][t].material=n}setupGround(e){let t=o.Mesh.CreateGround(e.name,e.width||100,e.height||100,e.subdivision||0,e.scene,e.updatable||!1);return e.texture&&(t.material=e.texture),t.checkCollisions=!0,t}setupImported(e){o.SceneLoader.ImportMesh(null,e.path,e.file,e.scene,(t=>{this.imported[e.name]=o.MeshBuilder.CreateBox(e.name,{size:e.size||1},this.scene),this.imported[e.name].visibility=0,t.forEach((t=>{t.checkCollisions=!0,t.parent=this.imported[e.name]})),e.position&&(this.imported[e.name].position=e.position),e.rotation&&(this.imported[e.name].rotation=e.rotation),e.scaling&&(this.imported[e.name].scaling=e.scaling)}))}setupSphere(e){const t=o.MeshBuilder.CreateBox(e.name,{size:e.diameter||1},e.scene);t.position.x=e.x||0,t.position.y=e.y||e.diameter/2||0,t.position.z=e.z||0,t.checkCollisions=!0,t.visibility=0;const n=o.Mesh.CreateSphere(`${e.name}_inner`,e.segment||16,e.diameter||1,e.scene,e.updatable||!1,e.sideOrientation||o.Mesh.FRONTSIDE);return e.texture&&(n.material=e.texture),e.rotate?(n.animations.push(this.rotateSphere),e.scene.beginAnimation(n,0,100,!0)):e.reverseRotate&&(n.animations.push(this.reverseRotateSphere),e.scene.beginAnimation(n,0,100,!0)),n.parent=t,t}setupTiledGround(e){const t={h:8,w:8},n=new o.MeshBuilder.CreateTiledGround(e.name,{xmin:-3,zmin:-3,xmax:3,zmax:3,subdivisions:t}),s=new o.MultiMaterial("multi",e.scene);s.subMaterials.push(e.texture),n.material=s;const i=n.getTotalVertices(),a=n.getIndices().length/(t.w*t.h);n.subMeshes=[];let r=0;for(let c=0;c<t.h;c++)for(let e=0;e<t.w;e++)n.subMeshes.push(new o.SubMesh(c%2^e%2,0,i,r,a,n)),r+=a;return n.checkCollisions=!0,n}}const m=new d;var p=m;class g{constructor(){this.all={}}addLight(e){return this.all[e.name]=this.setupLight(e),this.all[e.name]}setupLight(e){return new o.HemisphericLight(e.name,new o.Vector3(0,1,0),e.scene)}}const y=new g;var f=y;class v{constructor(){this.all={}}addTexture(e){return this.all[e.name]=this.setupTexture(e),this.all[e.name]}setAsset(e,t){e.diffuseTexture=new o.Texture(t.asset,t.scene)}setupTexture(e){let t=new o.StandardMaterial(this.name,this.scene);return e.asset&&this.setAsset(t,e),t}}const w=new v;var k=w;function x(e){f.addLight({name:"light1",scene:e.scene}),p.addMesh("imported",{name:"penguin",path:"assets/",file:"penguin.glb",scene:e.scene,position:new o.Vector3(0,11,0),rotation:new o.Vector3(Math.PI/2,Math.PI,0),scaling:new o.Vector3(2,2,2)}),p.addMesh("sphere",{name:"mochiS",diameter:12,scene:e.scene,texture:k.all.mochi,reverseRotate:!0,x:-15}),p.addMesh("sphere",{name:"mochi2S",diameter:6,scene:e.scene,texture:k.all.mochi2,rotate:!0,x:-15,y:12}),p.addMesh("sphere",{name:"noriS",diameter:10,scene:e.scene,texture:k.all.nori,rotate:!0,y:6}),p.addMesh("sphere",{name:"nori2SL",diameter:50,scene:this.scene,texture:k.all.nori2,x:100,y:25,z:-100}),p.addMesh("sphere",{name:"greggS",diameter:8,scene:e.scene,texture:k.all.gregg,rotate:!0,x:-30,y:10,z:-28}),p.addMesh("sphere",{name:"leoS",diameter:8,scene:e.scene,texture:k.all.leo,reverseRotate:!0,x:38,y:8,z:-25}),p.addMesh("sphere",{name:"fennyS",diameter:8,scene:e.scene,texture:k.all.fenny,rotate:!0,x:-20,y:10,z:28}),p.addMesh("sphere",{name:"indyS",diameter:8,scene:e.scene,texture:k.all.indy,reverseRotate:!0,x:-28,y:12,z:18}),p.addMesh("ground",{name:"ground1",width:150,height:150,scene:this.scene,texture:k.all.ground1}),l.addCamera({name:"camera",position:new o.Vector3(0,3,-40),scene:e.scene,canvas:e.canvas})}var M={createScene:x},L={name:"App",data(){return{canvas:void 0,crouch:!1,engine:void 0,jLock:!1,jump:2,scene:void 0,keys:{}}},mounted(){this.addKeyListeners(),this.canvas=document.getElementById("game");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new o.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new o.Scene(this.engine),this.scene.gravity=new o.Vector3(0,-1.3,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new o.CannonJSPlugin(!0,10,c)),this.setTextures(),M.createScene({scene:this.scene,engine:this.engine,canvas:this.canvas}),l.addPointerLock(this.scene,this.canvas),this.scene.registerAfterRender(this.keyboardListener),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{addKeyListeners(){document.addEventListener("keydown",(e=>{32==e.keyCode&&(this.keys.space=!0),16==e.keyCode&&(this.keys.shift=!0)})),document.addEventListener("keyup",(e=>{32==e.keyCode&&(this.keys.space=!1),16==e.keyCode&&(this.keys.shift=!1)}))},keyboardListener(){this.scene.isReady()&&(this.keys.shift&&!this.crouch?(l.all.camera.ellipsoid.y=.75,this.crouch=!0):!this.keys.shift&&this.crouch&&(l.all.camera.position.y+=1.5,l.all.camera.ellipsoid.y=1.5,this.crouch=!1),this.jump<2&&!this.jLock&&l.getGroundDistance("camera",this.scene)<4&&(this.jump=2),this.keys.space&&!this.jLock&&this.jump>0&&(this.jump--,this.jLock=!0,l.jump.setKeys([{frame:0,value:l.all.camera.position.y},{frame:20,value:l.all.camera.position.y+16}]),l.all.camera.animations=[l.jump],this.scene.beginAnimation(l.all.camera,0,20,!1)),this.jLock&&!this.keys.space&&(this.jLock=!1))},setTextures(){const e={ground1:"assets/mochi_full.jpg",gregg:"assets/gregg_face.png",leo:"assets/leo_face.png",mochi:"assets/mochi_face.jpg",mochi2:"assets/mochi_face_2.png",nori:"assets/nori_face.png",nori2:"assets/nori_full.png",snow:"assets/snow.png",fenny:"assets/fenny.png",indy:"assets/indy.png"};Object.keys(e).forEach((t=>{k.addTexture({name:t,scene:this.scene,asset:e[t]})}))}}},A=n(744);const b=(0,A.Z)(L,[["render",r]]);var O=b;(0,s.ri)(O).mount("#app")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,i,a){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],i=e[u][1],a=e[u][2];for(var o=!0,c=0;c<s.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(u--,1);var h=i();void 0!==h&&(t=h)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,i,a]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,a,r=s[0],o=s[1],c=s[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var u=c(n)}for(t&&t(s);h<r.length;h++)a=r[h],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},s=window["webpackChunknochi3d"]=window["webpackChunknochi3d"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(503)}));s=n.O(s)})();
//# sourceMappingURL=app.js.map?id=bf91b62f0afe13a9