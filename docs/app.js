(function(){"use strict";var e={111:function(e,t,n){var s=n(963),a=n(252);function i(e,t,n,s,i,r){const o=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(o)}var r={name:"App"},o=n(744);const c=(0,o.Z)(r,[["render",i]]);var h=c,u=n(119);const d={class:"demo",id:"demo"};function l(e,t,n,s,i,r){return(0,a.wg)(),(0,a.iD)("canvas",d)}var m=n(385),p=n(125);class g{constructor(){this.all={}}addCamera(e){this.all[e.name]=this.setupCamera(e),this.addCameraWASD(e.name)}setupCamera(e){const t=new m.UniversalCamera(e.name,new m.Vector3(30,3,-70),e.scene);return t.setTarget(new m.Vector3(10,10,0)),t.applyGravity=!0,t._needMoveForGravity=!0,t.ellipsoid=new m.Vector3(1,1.5,1),t.checkCollisions=!0,t.attachControl(e.canvas,!0),t}addCameraWASD(e){this.all[e].keysUp.push(87),this.all[e].keysDown.push(83),this.all[e].keysRight.push(68),this.all[e].keysLeft.push(65)}getGroundDistance(e,t){const n=this.all[e].position,s=m.Vector3.Down(),a=300,i=new m.Ray(n,s,a),r=t.pickWithRay(i);return r.distance}}const v=new g;var f=v;class w{constructor(){this.ground={},this.sphere={},this.rotateSphere=new m.Animation("rotateSphere","rotation.y",10,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),this.rotateSphere.setKeys([{frame:0,value:0},{frame:100,value:2*Math.PI}]),this.reverseRotateSphere=new m.Animation("rotateSphere","rotation.y",10,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),this.reverseRotateSphere.setKeys([{frame:0,value:0},{frame:100,value:-2*Math.PI}])}addMesh(e,t){return this[e][t.name]={},"ground"===e?this[e][t.name]=this.setupGround(t):"sphere"===e&&(this[e][t.name]=this.setupSphere(t)),this[e][t.name]}setTexture(e,t,n){this[e][t].material=n}setupGround(e){let t=m.Mesh.CreateGround(e.name,e.width||100,e.height||100,e.subdivision||0,e.scene,e.updatable||!1);return e.texture&&(t.material=e.texture),t.checkCollisions=!0,t}setupSphere(e){const t=m.MeshBuilder.CreateBox(e.name,{size:e.diameter||1},e.scene);t.position.x=e.x||0,t.position.y=e.y||e.diameter/2||0,t.position.z=e.z||0,t.checkCollisions=!0,t.visibility=0;const n=m.Mesh.CreateSphere(`${e.name}_inner`,e.segment||16,e.diameter||1,e.scene,e.updatable||!1,e.sideOrientation||m.Mesh.FRONTSIDE);return e.texture&&(n.material=e.texture),e.rotate?(n.animations.push(this.rotateSphere),e.scene.beginAnimation(n,0,100,!0)):e.reverseRotate&&(n.animations.push(this.reverseRotateSphere),e.scene.beginAnimation(n,0,100,!0)),n.parent=t,t}}const y=new w;var A=y;class x{constructor(){this.all={}}addLight(e){return this.all[e.name]=this.setupLight(e),this.all[e.name]}setupLight(e){return new m.HemisphericLight(e.name,new m.Vector3(0,1,0),e.scene)}}const k=new x;var O=k;class T{constructor(){this.all={}}addTexture(e){return this.all[e.name]=this.setupTexture(e),this.all[e.name]}setAsset(e,t){e.diffuseTexture=new m.Texture(t.asset,t.scene)}setupTexture(e){let t=new m.StandardMaterial(this.name,this.scene);return e.asset&&this.setAsset(t,e),t}}const L=new T;var M=L,E={name:"demo",data(){return{canvas:void 0,engine:void 0,jLock:!1,jump:2,kDown:{},scene:void 0}},mounted(){this.canvas=document.getElementById("demo");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new m.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.createScene(),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{addKeyControls(){this.scene.actionManager=new m.ActionManager(this.scene),this.scene.actionManager.registerAction(new m.ExecuteCodeAction(m.ActionManager.OnKeyDownTrigger,(e=>{this.kDown[e.sourceEvent.key]="keydown"==e.sourceEvent.type}))),this.scene.actionManager.registerAction(new m.ExecuteCodeAction(m.ActionManager.OnKeyUpTrigger,(e=>{this.kDown[e.sourceEvent.key]="keydown"==e.sourceEvent.type})))},addPointerLock(){this.scene.onPointerDown=()=>{this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.msRequestPointerLock||this.canvas.mozRequestPointerLock||this.canvas.webkitRequestPointerLock,this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}},addTextures(){M.addTexture({name:"ground1",scene:this.scene,asset:"assets/mochi_full.jpg"}),M.addTexture({name:"gregg",scene:this.scene,asset:"assets/gregg_face.png"}),M.addTexture({name:"leo",scene:this.scene,asset:"assets/leo_face.png"}),M.addTexture({name:"mochi",scene:this.scene,asset:"assets/mochi_face.jpg"}),M.addTexture({name:"mochi2",scene:this.scene,asset:"assets/mochi_face_2.png"}),M.addTexture({name:"nori",scene:this.scene,asset:"assets/nori_face.png"}),M.addTexture({name:"nori2",scene:this.scene,asset:"assets/nori_full.png"})},createScene(){this.scene=new m.Scene(this.engine),this.scene.gravity=new m.Vector3(0,-.6,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new m.CannonJSPlugin(!0,10,p)),this.addKeyControls(),this.addPointerLock(),this.addTextures(),f.addCamera({name:"camera",scene:this.scene,canvas:this.canvas}),O.addLight({name:"light1",scene:this.scene}),A.addMesh("sphere",{name:"sphere1",diameter:10,scene:this.scene,texture:M.all.nori,rotate:!0,y:6}),A.addMesh("sphere",{name:"sphere2",diameter:8,scene:this.scene,texture:M.all.gregg,rotate:!0,x:20,y:10,z:-28}),A.addMesh("sphere",{name:"sphere3",diameter:12,scene:this.scene,texture:M.all.mochi,reverseRotate:!0,x:-15}),A.addMesh("sphere",{name:"sphere4",diameter:6,scene:this.scene,texture:M.all.mochi2,rotate:!0,x:-15,y:12}),A.addMesh("sphere",{name:"sphere5",diameter:8,scene:this.scene,texture:M.all.leo,reverseRotate:!0,x:28,y:8,z:-18}),A.addMesh("sphere",{name:"sphereL",diameter:50,scene:this.scene,texture:M.all.nori2,x:100,y:25,z:-100}),A.addMesh("ground",{name:"ground1",width:150,height:150,scene:this.scene,texture:M.all.ground1}),this.scene.registerAfterRender(this.registerAfterRenderCallback)},registerAfterRenderCallback(){if(f.getGroundDistance("camera",this.scene)<4&&!this.jLock&&(this.jump=2),this.kDown[" "]&&!this.jLock&&this.jump>0){this.jump--,this.jLock=!0,f.all.camera.animations=[];let e=new m.Animation("a","position.y",60,m.Animation.ANIMATIONTYPE_FLOAT,m.Animation.ANIMATIONLOOPMODE_CYCLE),t=[];t.push({frame:0,value:f.all.camera.position.y}),t.push({frame:20,value:f.all.camera.position.y+16}),e.setKeys(t);let n=new m.CircleEase;n.setEasingMode(m.EasingFunction.EASINGMODE_EASEINOUT),e.setEasingFunction(n),f.all.camera.animations.push(e),this.scene.beginAnimation(f.all.camera,0,20,!1)}!this.kDown[" "]&&this.jLock&&(this.jLock=!1)}}};const C=(0,o.Z)(E,[["render",l],["__scopeId","data-v-41a1b64c"]]);var b=C;const P=[{path:"/",name:"Title",component:b}],D=(0,u.p7)({history:(0,u.r5)(),routes:P});var S=D;(0,s.ri)(h).use(S).mount("#app")}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,s,a,i){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],i=e[u][2];for(var o=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(o=!1,i<r&&(r=i));if(o){e.splice(u--,1);var h=a();void 0!==h&&(t=h)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,a,i]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,i,r=s[0],o=s[1],c=s[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var u=c(n)}for(t&&t(s);h<r.length;h++)i=r[h],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},s=window["webpackChunknochi3d"]=window["webpackChunknochi3d"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(111)}));s=n.O(s)})();
//# sourceMappingURL=app.js.map?id=c84aa536c658908c