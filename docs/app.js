(function(){"use strict";var e={87:function(e,t,i){var n=i(963),a=i(252);const o={class:"game",id:"game"};function r(e,t,i,n,r,s){return(0,a.wg)(),(0,a.iD)("canvas",o)}var s=i(385),h=i(125);i(1);class c{constructor(){this.all={},this.jump=new s.Animation("jump","position.y",60,s.Animation.ANIMATIONTYPE_FLOAT,s.Animation.ANIMATIONLOOPMODE_CYCLE);const e=new s.CircleEase;e.setEasingMode(s.EasingFunction.EASINGMODE_EASEOUT),this.jump.setEasingFunction(e)}addCamera(e){this.all[e.name]=this.setupCamera(e),this.addCameraWASD(e.name)}addCameraWASD(e){this.all[e].keysUp.push(87),this.all[e].keysDown.push(83),this.all[e].keysRight.push(68),this.all[e].keysLeft.push(65)}addPointerLock(e,t){e.onPointerDown=()=>{t.requestPointerLock=t.requestPointerLock||t.msRequestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock&&t.requestPointerLock()}}getGroundDistance(e,t){const i=this.all[e].position,n=s.Vector3.Down(),a=300,o=new s.Ray(i,n,a),r=t.pickWithRay(o);return r.distance}setupCamera(e){const t=new s.UniversalCamera(e.name,e.position||new s.Vector3(0,3,0),e.scene);return t.inertia=.3,t.angularSensibility=800,t.speed=10,t.setTarget(new s.Vector3(0,10,0)),t.applyGravity=!0,t._needMoveForGravity=!0,t.ellipsoid=new s.Vector3(1.5,1.5,1.5),t.checkCollisions=!0,t.attachControl(e.canvas,!0),t}}const l=new c;var m=l;class d{constructor(){this.ground={},this.imported={},this.sphere={},this.rotateSphere=new s.Animation("rotateSphere","rotation.y",10,s.Animation.ANIMATIONTYPE_FLOAT,s.Animation.ANIMATIONLOOPMODE_CYCLE),this.rotateSphere.setKeys([{frame:0,value:0},{frame:100,value:2*Math.PI}]),this.reverseRotateSphere=new s.Animation("rotateSphere","rotation.y",10,s.Animation.ANIMATIONTYPE_FLOAT,s.Animation.ANIMATIONLOOPMODE_CYCLE),this.reverseRotateSphere.setKeys([{frame:0,value:0},{frame:100,value:-2*Math.PI}])}addMesh(e,t){"ground"===e?this[e][t.name]=this.setupGround(t):"sphere"===e?this[e][t.name]=this.setupSphere(t):"imported"===e?this[e][t.name]=this.setupImported(t):"tiledground"===e?this.ground[t.name]=this.setupTiledGround(t):this[e][t.name]={}}setTexture(e,t,i){this[e][t].material=i}setupGround(e){let t=s.Mesh.CreateGround(e.name,e.width||100,e.height||100,e.subdivision||0,e.scene,e.updatable||!1);return e.texture&&(t.material=e.texture),t.checkCollisions=!0,t}setupImported(e){s.SceneLoader.ImportMesh(null,e.path,e.file,e.scene,(t=>{this.imported[e.name]=s.MeshBuilder.CreateBox(e.name,{size:e.size||1},this.scene),this.imported[e.name].visibility=0,t.forEach((t=>{t.checkCollisions=!0,t.parent=this.imported[e.name]})),e.position&&(this.imported[e.name].position=e.position),e.rotation&&(this.imported[e.name].rotation=e.rotation),e.scaling&&(this.imported[e.name].scaling=e.scaling)}))}setupSphere(e){const t=s.MeshBuilder.CreateBox(e.name,{size:e.diameter||1},e.scene);t.position.x=e.x||0,t.position.y=e.y||e.diameter/2||0,t.position.z=e.z||0,t.checkCollisions=!0,t.visibility=0;const i=s.Mesh.CreateSphere(`${e.name}_inner`,e.segment||16,e.diameter||1,e.scene,e.updatable||!1,e.sideOrientation||s.Mesh.FRONTSIDE);return e.texture&&(i.material=e.texture),e.rotate?(i.animations.push(this.rotateSphere),e.scene.beginAnimation(i,0,100,!0)):e.reverseRotate&&(i.animations.push(this.reverseRotateSphere),e.scene.beginAnimation(i,0,100,!0)),i.parent=t,t}setupTiledGround(e){const t={h:8,w:8},i=new s.MeshBuilder.CreateTiledGround(e.name,{xmin:-3,zmin:-3,xmax:3,zmax:3,subdivisions:t}),n=new s.MultiMaterial("multi",e.scene);n.subMaterials.push(e.texture),i.material=n;const a=i.getTotalVertices(),o=i.getIndices().length/(t.w*t.h);i.subMeshes=[];let r=0;for(let h=0;h<t.h;h++)for(let e=0;e<t.w;e++)i.subMeshes.push(new s.SubMesh(h%2^e%2,0,a,r,o,i)),r+=o;return i.checkCollisions=!0,i}}const u=new d;var p=u;class w{constructor(){this.all={}}addTexture(e){return this.all[e.name]=this.setupTexture(e),this.all[e.name]}setAsset(e,t){e.diffuseTexture=new s.Texture(t.asset,t.scene)}setupTexture(e){let t=new s.StandardMaterial(this.name,this.scene);return e.asset&&this.setAsset(t,e),t}}const g=new w;var b=g;function f(e){const t=[{type:"HemisphericLight",position:new s.Vector3(0,1,0),specular:new s.Color3.Black,diffuse:new s.Color3(1,1,1)}];t.forEach(((t,i)=>{const n=new s[`${t.type}`](`${t.type}${i}`,t.position,e.scene);t.diffuse&&(n.diffuse=t.diffuse),t.specular&&(n.specular=t.specular),t.groundColor&&(n.groundColor=t.groundColor)}));const i=[{name:"mainGround",width:175,height:275}];i.forEach((t=>{p.addMesh("ground",{...t,scene:e.scene})}));const n={red:{color:new s.Color3.Red},green:{color:new s.Color3.Green},blue:{color:new s.Color3.Blue},yellow:{color:new s.Color3.Yellow}};Object.keys(n).forEach((t=>{n[t].material=new s.StandardMaterial(t,e.scene),n[t].material.diffuseColor=n[t].color}));const a=[{name:"garage1",height:40,width:15,material:"red",position:new s.Vector3(-7.5,20,-30)},{name:"garage12",height:20,width:15,material:"green",position:new s.Vector3(-22.5,30,-30)},{name:"garage11",height:40,width:50,material:"red",position:new s.Vector3(-55,20,-30)},{name:"garage9",height:40,width:80,material:"blue",position:new s.Vector3(-80,20,-70),rotate:!0},{name:"garage6",height:40,width:80,material:"red",position:new s.Vector3(-40,20,-110)},{name:"garage3",height:40,width:80,material:"blue",position:new s.Vector3(0,20,-70),rotate:!0},{name:"bra9",height:40,width:50,material:"blue",position:new s.Vector3(-80,20,-5),rotate:!0},{name:"bra12",height:40,width:50,material:"red",position:new s.Vector3(-55,20,20)},{name:"bra4",height:40,width:30,material:"blue",position:new s.Vector3(-30,20,-15),rotate:!0},{name:"bra1",height:40,width:5,material:"blue",position:new s.Vector3(-30,20,17.5),rotate:!0},{name:"bra2",height:20,width:15,material:"green",position:new s.Vector3(-30,30,7.5),rotate:!0},{name:"laundry3",height:40,width:30,material:"blue",position:new s.Vector3(0,20,-15),rotate:!0},{name:"laundry1",height:40,width:15,material:"red",position:new s.Vector3(-7.5,20,0)},{name:"laundry12",height:20,width:15,material:"green",position:new s.Vector3(-22.5,30,0)},{name:"brb9",height:40,width:50,material:"blue",position:new s.Vector3(-80,20,45),rotate:!0},{name:"brb5",height:40,width:5,material:"blue",position:new s.Vector3(-30,20,22.5),rotate:!0},{name:"brb4",height:20,width:15,material:"green",position:new s.Vector3(-30,30,32.5),rotate:!0},{name:"brb12",height:40,width:50,material:"red",position:new s.Vector3(-55,20,70)},{name:"brb1",height:40,width:30,material:"blue",position:new s.Vector3(-30,20,55),rotate:!0},{name:"living6",height:40,width:60,material:"red",position:new s.Vector3(50,20,-130)},{name:"living7",height:40,width:20,material:"blue",position:new s.Vector3(20,20,-120),rotate:!0},{name:"living8",height:40,width:20,material:"yellow",position:new s.Vector3(10,20,-110)},{name:"living3",height:40,width:80,material:"blue",position:new s.Vector3(80,20,-90),rotate:!0},{name:"living12",height:40,width:50,material:"red",position:new s.Vector3(55,20,-50)},{name:"kitchen3",height:40,width:70,material:"blue",position:new s.Vector3(80,20,-15),rotate:!0},{name:"kitchen12",height:20,width:40,material:"yellow",position:new s.Vector3(50,30,20)},{name:"kitchen1",height:5,width:40,material:"yellow",position:new s.Vector3(50,2.5,20)},{name:"kitchen2",height:40,width:10,material:"red",position:new s.Vector3(75,20,20)},{name:"family3",height:40,width:70,material:"blue",position:new s.Vector3(80,20,55),rotate:!0},{name:"family9",height:40,width:70,material:"blue",position:new s.Vector3(10,20,55),rotate:!0},{name:"family12",height:40,width:70,material:"red",position:new s.Vector3(45,20,90)},{name:"batha6",height:40,width:20,material:"red",position:new s.Vector3(0,20,20)},{name:"batha6",height:40,width:20,material:"red",position:new s.Vector3(0,20,20)},{name:"batha12",height:40,width:20,material:"red",position:new s.Vector3(0,20,60)},{name:"batha7",height:20,width:15,material:"green",position:new s.Vector3(-10,30,27.5),rotate:!0},{name:"batha10",height:40,width:25,material:"blue",position:new s.Vector3(-10,20,47.5),rotate:!0},{name:"bathb12",height:40,width:20,material:"red",position:new s.Vector3(0,20,90)},{name:"brc1",height:40,width:15,material:"blue",position:new s.Vector3(-10,20,122.5),rotate:!0},{name:"brc2",height:20,width:15,material:"green",position:new s.Vector3(-10,30,107.5),rotate:!0},{name:"brc3",height:40,width:10,material:"blue",position:new s.Vector3(-10,20,95),rotate:!0},{name:"brc4",height:20,width:15,material:"green",position:new s.Vector3(-10,30,82.5),rotate:!0},{name:"brc5",height:40,width:15,material:"blue",position:new s.Vector3(-10,20,67.5),rotate:!0},{name:"brc9",height:40,width:60,material:"blue",position:new s.Vector3(-80,20,100),rotate:!0},{name:"brc12",height:40,width:70,material:"red",position:new s.Vector3(-45,20,130)},{name:"bathb3",height:40,width:40,material:"blue",position:new s.Vector3(30,20,110),rotate:!0},{name:"bathb3",height:40,width:40,material:"red",position:new s.Vector3(10,20,130)},{name:"bathb3",height:40,width:40,material:"red",position:new s.Vector3(10,20,130)},{name:"roof",height:275,width:175,material:"yellow",position:new s.Vector3(0,40,0)}];a.forEach((e=>{const t=s.MeshBuilder.CreateBox(e.name,{height:e.height,width:e.width,depth:.5});t.material=n[e.material].material,t.position=e.position,t.rotation.y=e.rotate?Math.PI/2:0,t.rotation.x="roof"===e.name?Math.PI/-2:0,t.checkCollisions=!0})),m.addCamera({name:"camera",position:new s.Vector3(10,3,-100),scene:e.scene,canvas:e.canvas})}var y={createScene:f};class v{constructor(){this.all={}}addLight(e){return this.all[e.name]=this.setupLight(e),this.all[e.name]}setupLight(e){return new s.HemisphericLight(e.name,new s.Vector3(0,1,0),e.scene)}}new v;var V={name:"App",data(){return{canvas:void 0,crouch:!1,engine:void 0,jLock:!1,jump:2,scene:void 0,keys:{}}},mounted(){this.addKeyListeners(),this.canvas=document.getElementById("game");let e=this.canvas.getContext("webgl");e.getParameter(e.RENDERER),this.engine=new s.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new s.Scene(this.engine),this.scene.gravity=new s.Vector3(0,-2.4,0),this.scene.collisionsEnabled=!0,this.scene.enablePhysics(null,new s.CannonJSPlugin(!0,10,h)),this.setTextures(),y.createScene({scene:this.scene,engine:this.engine,canvas:this.canvas}),m.addPointerLock(this.scene,this.canvas),this.scene.registerAfterRender(this.keyboardListener),this.engine.runRenderLoop((()=>{this.scene.render()})),window.addEventListener("resize",(()=>{this.engine.resize()}))},methods:{addKeyListeners(){document.addEventListener("keydown",(e=>{32==e.keyCode&&(this.keys.space=!0),16==e.keyCode&&(this.keys.shift=!0)})),document.addEventListener("keyup",(e=>{32==e.keyCode&&(this.keys.space=!1),16==e.keyCode&&(this.keys.shift=!1)}))},keyboardListener(){this.scene.isReady()&&(this.keys.shift&&!this.crouch?(m.all.camera.ellipsoid.y=.75,this.crouch=!0):!this.keys.shift&&this.crouch&&(m.all.camera.position.y+=1.5,m.all.camera.ellipsoid.y=1.5,this.crouch=!1),this.jump<2&&!this.jLock&&m.getGroundDistance("camera",this.scene)<4&&(this.jump=2),this.keys.space&&!this.jLock&&this.jump>0&&(this.jump--,this.jLock=!0,m.jump.setKeys([{frame:0,value:m.all.camera.position.y},{frame:20,value:m.all.camera.position.y+16}]),m.all.camera.animations=[m.jump],this.scene.beginAnimation(m.all.camera,0,20,!1)),this.jLock&&!this.keys.space&&(this.jLock=!1))},setTextures(){const e={ground1:"assets/mochi_full.jpg",gregg:"assets/gregg_face.png",leo:"assets/leo_face.png",mochi:"assets/mochi_face.jpg",mochi2:"assets/mochi_face_2.png",nori:"assets/nori_face.png",nori2:"assets/nori_full.png",snow:"assets/snow.png",fenny:"assets/fenny.png",indy:"assets/indy.png"};Object.keys(e).forEach((t=>{b.addTexture({name:t,scene:this.scene,asset:e[t]})}))}}},k=i(744);const C=(0,k.Z)(V,[["render",r]]);var L=C;(0,n.ri)(L).mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,o){if(!n){var r=1/0;for(l=0;l<e.length;l++){n=e[l][0],a=e[l][1],o=e[l][2];for(var s=!0,h=0;h<n.length;h++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[h])}))?n.splice(h--,1):(s=!1,o<r&&(r=o));if(s){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,a,o]}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,r=n[0],s=n[1],h=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(h)var l=h(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(l)},n=window["webpackChunknochi3d"]=window["webpackChunknochi3d"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(87)}));n=i.O(n)})();
//# sourceMappingURL=app.js.map?id=8849a6de5463763a